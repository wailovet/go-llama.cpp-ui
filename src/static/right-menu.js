/**
 * Skipped minification because the original files appears to be already minified.
 * Original file: /npm/@right-menu/core@0.0.9/dist/index.umd.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
!function(e,n){"object"==typeof exports&&"undefined"!=typeof module?module.exports=n():"function"==typeof define&&define.amd?define(n):(e="undefined"!=typeof globalThis?globalThis:e||self).RightMenu=n()}(this,(function(){"use strict";
/*! *****************************************************************************
    Copyright (c) Microsoft Corporation.

    Permission to use, copy, modify, and/or distribute this software for any
    purpose with or without fee is hereby granted.

    THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
    REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
    AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
    INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
    LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
    OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
    PERFORMANCE OF THIS SOFTWARE.
    ***************************************************************************** */function e(e,n,t,o){return new(t||(t=Promise))((function(i,r){function a(e){try{l(o.next(e))}catch(e){r(e)}}function c(e){try{l(o.throw(e))}catch(e){r(e)}}function l(e){var n;e.done?i(e.value):(n=e.value,n instanceof t?n:new t((function(e){e(n)}))).then(a,c)}l((o=o.apply(e,n||[])).next())}))}function n(e,n){var t,o,i,r,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function c(r){return function(c){return function(r){if(t)throw new TypeError("Generator is already executing.");for(;a;)try{if(t=1,o&&(i=2&r[0]?o.return:r[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,r[1])).done)return i;switch(o=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return a.label++,{value:r[1],done:!1};case 5:a.label++,o=r[1],r=[0];continue;case 7:r=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==r[0]&&2!==r[0])){a=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){a.label=r[1];break}if(6===r[0]&&a.label<i[1]){a.label=i[1],i=r;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(r);break}i[2]&&a.ops.pop(),a.trys.pop();continue}r=n.call(e,a)}catch(e){r=[6,e],o=0}finally{t=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,c])}}}var t=navigator.userAgent,o="Win32"===navigator.platform||"Windows"===navigator.platform,i="Mac68K"===navigator.platform||"MacPPC"===navigator.platform||"Macintosh"===navigator.platform||"MacIntel"===navigator.platform,r="X11"===navigator.platform&&!o&&!i,a=String(navigator.platform).indexOf("Linux")>-1,c=t.indexOf("Windows NT 5.0")>-1||t.indexOf("Windows 2000")>-1,l=t.indexOf("Windows NT 5.1")>-1||t.indexOf("Windows XP")>-1,s=t.indexOf("Windows NT 5.2")>-1||t.indexOf("Windows 2003")>-1,d=t.indexOf("Windows NT 6.0")>-1||t.indexOf("Windows Vista")>-1,u=t.indexOf("Windows NT 6.1")>-1||t.indexOf("Windows 7")>-1,f=t.indexOf("Windows NT 8")>-1||t.indexOf("Windows 8")>-1,h=t.indexOf("Windows NT 10")>-1||t.indexOf("Windows 10")>-1,p=[],m=[];function v(e,n){if(e&&"undefined"!=typeof document){var t,o=!0===n.prepend?"prepend":"append",i=!0===n.singleTag,r="string"==typeof n.container?document.querySelector(n.container):document.getElementsByTagName("head")[0];if(i){var a=p.indexOf(r);-1===a&&(a=p.push(r)-1,m[a]={}),t=m[a]&&m[a][o]?m[a][o]:m[a][o]=c()}else t=c();65279===e.charCodeAt(0)&&(e=e.substring(1)),t.styleSheet?t.styleSheet.cssText+=e:t.appendChild(document.createTextNode(e))}function c(){var e=document.createElement("style");if(e.setAttribute("type","text/css"),n.attributes)for(var t=Object.keys(n.attributes),i=0;i<t.length;i++)e.setAttribute(t[i],n.attributes[t[i]]);var a="prepend"===o?"afterbegin":"beforeend";return r.insertAdjacentElement(a,e),e}}v("/**\n * 基础样式\n */\n.right-menu-list {\n  width: auto;\n  z-index: 9999999;\n  position: fixed;\n  display: block;\n  box-sizing: border-box;\n  user-select: none;\n}\n.right-menu-list li {\n  display: block;\n  list-style: none;\n  cursor: default;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n  position: relative;\n}\n.right-menu-list li.skeleton::before {\n  content: '.';\n  display: inline-block;\n  width: 100%;\n  border-radius: 3px;\n  background-image: linear-gradient(-45deg, #ccc 40%, #fff 55%, #ccc 63%);\n  background-size: 400% auto;\n  background-repeat: no-repeat;\n  position: relative;\n  color: transparent;\n  animation: skeleton-animation 2s ease infinite;\n}\n.right-menu-list li.skeleton:hover {\n  color: transparent;\n  background-color: transparent;\n}\n.right-menu-list li.menu-hr {\n  height: 0;\n  border-bottom: 1px solid #ccc;\n}\n.right-menu-list li.menu-hr:hover {\n  background-color: transparent !important;\n}\n.right-menu-list li.menu-ul::after {\n  content: '▸';\n  width: 15px;\n  height: 15px;\n  position: absolute;\n  right: 0px;\n}\n@keyframes skeleton-animation {\n  0% {\n    background-position: 100% 50%;\n  }\n  100% {\n    background-position: 0 50%;\n  }\n}\n",{});v("/**\n * mac主题色\n */\n.theme-mac {\n  min-width: 180px;\n  max-width: 300px;\n  color: var(--font-color);\n  font-size: 13px;\n  margin: 0;\n  padding: 5px 4px;\n  border: 0.5px solid var(--border-color);\n  border-radius: 5px;\n  background-color: var(--bg-color);\n  box-shadow: 0 2px 12px 0 var(--shadow-color);\n}\n.theme-mac li {\n  padding: 2.5px 26px 2.5px 8px;\n  border-radius: 3px;\n}\n.theme-mac li:hover {\n  color: var(--active-font-color);\n  background-color: var(--active-bg-color);\n}\n.theme-mac li.skeleton {\n  padding: 2.5px 8px;\n}\n.theme-mac li.skeleton::before {\n  background-image: linear-gradient(-45deg, var(--menu-skeleton-color) 40%, var(--menu-skeleton-acitve-color) 55%, var(--menu-skeleton-color) 63%);\n}\n.theme-mac li.menu-hr {\n  border-bottom: 1px solid var(--split-boder-color);\n  padding: 0;\n  margin: 5px 8px;\n}\n.theme-mac li.menu-disabled {\n  color: var(--disabled-font-color);\n}\n.theme-mac li.menu-disabled:hover {\n  color: var(--active-disabled-font-color);\n  background-color: var(--active-disabled-bg-color);\n}\n.theme-light {\n  --shadow-color: rgba(0, 0, 0, 0.2);\n  --active-shadow-color: rgba(0, 0, 0, 0.2);\n  --border-color: #cdcdcd;\n  --active-border-color: #cdcdcd;\n  --font-color: #222;\n  --active-font-color: #fff;\n  --bg-color: #eae8e9;\n  --active-bg-color: #68a1f9;\n  --disabled-font-color: #a8a8a8;\n  --active-disabled-font-color: #a8a8a8;\n  --disabled-bg-color: #eae8e9;\n  --active-disabled-bg-color: #eae8e9;\n  --split-boder-color: #d0cecf;\n  --menu-skeleton-color: #f5f5f5;\n  --menu-skeleton-acitve-color: #fff;\n}\n.theme-dark {\n  --shadow-color: #040405;\n  --active-shadow-color: #040405;\n  --border-color: #525253;\n  --active-border-color: #525253;\n  --font-color: #eaeaea;\n  --active-font-color: #fff;\n  --bg-color: #262628;\n  --active-bg-color: #68a1f9;\n  --disabled-font-color: #656668;\n  --active-disabled-font-color: #656668;\n  --disabled-bg-color: #262628;\n  --active-disabled-bg-color: #262628;\n  --split-boder-color: #494a4c;\n  --menu-skeleton-color: #4c4c4f;\n  --menu-skeleton-acitve-color: #444;\n}\n",{});v("/**\n * win10主题色\n */\n.theme-win10 {\n  min-width: 260px;\n  max-width: 500px;\n  color: #202124;\n  font-size: 14px;\n  margin: 0;\n  padding: 5px 0px;\n  border: 0.5px solid #dadce0;\n  border-radius: 0px;\n  background-color: #fff;\n  box-shadow: 0 2px 12px 0 rgba(0, 0, 0, 0.1);\n  letter-spacing: 0.5px;\n}\n.theme-win10 li {\n  padding: 7px 40px;\n  border-radius: 0px;\n}\n.theme-win10 li:hover {\n  color: #202124;\n  background-color: #e8e8e9;\n}\n.theme-win10 li.menu-hr {\n  border-bottom: 1px solid #dadce0;\n  padding: 0;\n  margin: 5px 0px;\n}\n.theme-win10 li.menu-disabled {\n  color: #ccc;\n}\n.theme-win10 li.menu-disabled:hover {\n  color: #ccc;\n  background-color: #fff;\n}\n.theme-win10 li.menu-ul::after {\n  color: #626365;\n  font-size: 20px;\n  position: absolute;\n  right: 17px;\n}\n",{});var b=function(){var e={isWin10:h,isMac:i,isWin7:u,isWin8:f,isWin2003:s,isWin2000:c,isWinXP:l,isWinVista:d,isWin:o,isUnix:r,isLinux:a};for(var n in e)if(e[n])return n;return"isMac"}(),g=["class","style"],x={class:" ",style:";"},w=function(e){var n,t;return(null===(t=(n=e).getBoundingClientRect)||void 0===t?void 0:t.call(n))||e},y=function(e){window.event?window.event.cancelBubble=!0:e.stopPropagation(),e.preventDefault?e.preventDefault():window.event.returnValue=!1},k=function(e,n){var t={};return g.forEach((function(o){e[o]&&(t[o]=e[o]),n[o]&&(t[o]?t[o]+=x[o]+n[o]:t[o]=n[o])})),t},E=function(e,n,t){void 0===t&&(t=1);var o=w(n),i=o.width,r=o.height,a=w(e),c=a.x,l=a.y,s=a.width,d=void 0===s?0:s,u=a.height,f=void 0===u?0:u,h=t;"parentElement"in e&&e.parentElement&&(h=n.direction=e.parentElement.direction||h);var p;switch(h){case-1:p=function(){var e=c-i;return e<0&&(e=c+d,n.direction=1),e}();break;case 1:p=function(){var e=c+d;return n.offsetWidth+e>window.innerWidth&&(e=c-i,n.direction=-1),e}();break;default:throw new Error("Unsupported direction: "+t)}var m=function(){var e=l;return n.offsetHeight+e>window.innerHeight&&(e=l+f-r),e}();!function(e,n,t){e.style.left=n+"px",e.style.top=t+"px"}(n,p,m)},W=function(e){return"string"==typeof e?e:e+"px"},M=window.matchMedia("(prefers-color-scheme: dark)"),L=function(e){switch(e){case"light":return"theme-light";case"dark":return"theme-dark";default:return M.matches?"theme-dark":"theme-light"}},O=function(){function t(e,n){var t=this;this.version="0.0.9",this.menu=null,this.eventList=[],this.menuStyle={"min-width":"","max-width":""};var o=this.config="string"==typeof e?{el:e}:e;o.theme=o.theme||b.toLowerCase().replace(/is/,"")||"mac",0===o.theme.indexOf("theme-")&&(o.theme=o.theme.slice(6)),o.minWidth&&(this.menuStyle["min-width"]=W(o.minWidth)),o.maxWidth&&(this.menuStyle["max-width"]=W(o.maxWidth));var i="string"==typeof o.el?document.querySelector(o.el):o.el;null==i||i.addEventListener(o.mode||"contextmenu",(function(e){var i="function"==typeof n?n(e,o):n;t.init(e,i)}))}return t.prototype.init=function(t,o){var i,r;return e(this,void 0,void 0,(function(){var e,a,c;return n(this,(function(n){switch(n.label){case 0:return null===(i=this.config.beforeInit)||void 0===i||i.call(this),y(t),this.destroyMenu(),this.initSkeleton(t),e=!1,a=function(){return e=!0},document.addEventListener("mousedown",a),[4,Promise.resolve(o)];case 1:return c=n.sent(),document.removeEventListener("mousedown",a),e?[2]:(this.destroyMenu(),this.menu=this.renderMenu(c),this.initMenu(t,this.menu),null===(r=this.config.afterInit)||void 0===r||r.call(this),[2])}}))}))},t.prototype.initMenu=function(e,n){var t=this;document.body.appendChild(n),E(e,n,1),n.addEventListener(this.config.mode||"contextmenu",y),this.addEvent(window,"blur",this.destroyMenu.bind(this)),this.addEvent(window,"resize",this.destroyMenu.bind(this)),this.addEvent(document,"mousedown",(function(e){var o;(null===(o=e.path)||void 0===o?void 0:o.some((function(e){return e===n})))||t.destroyMenu()}))},t.prototype.initSkeleton=function(e){var n=this,t=new Array(3).fill(null).map((function(){return n.createDom("li",{class:"skeleton"})})),o=this.createDom("ul",{class:"right-menu-list theme-"+this.config.theme+" "+L(this.config.theme),style:this.menuStyle},t);this.initMenu(e,o)},t.prototype.destroyMenu=function(){var e=document.querySelectorAll(".right-menu-list");e&&e.forEach((function(e){var n;null===(n=e.parentNode)||void 0===n||n.removeChild(e)})),this.removeEvent(),this.menu=null},t.prototype.addEvent=function(e,n,t){e.addEventListener(n,t),this.eventList.push([e,n,t])},t.prototype.removeEvent=function(){for(;this.eventList.length;){var e=this.eventList.shift(),n=e[0],t=e[1],o=e[2];n.removeEventListener(t,o)}},t.prototype.renderMenu=function(e){var n=this,t=e.map((function(e){switch(e.type){case"hr":return n.createHr(e);case"li":return n.createLi(e);case"ul":return n.createUl(e);default:throw new Error("未知的 type 类型 => "+e.type)}}));return this.createDom("ul",{class:"right-menu-list theme-"+this.config.theme+" "+L(this.config.theme),style:this.menuStyle},t)},t.prototype.createDom=function(e,n,t){void 0===e&&(e="ul"),void 0===n&&(n={}),void 0===t&&(t=[]);var o=document.createElement(e);return Object.keys(n).forEach((function(e){var t=n[e];if(t){var i="";switch(e){case"style":i=function(e){if("string"==typeof e)return e;var n=[];return Object.keys(e).forEach((function(t){e[t]&&n.push(t.replace(/[A-Z]/g,(function(e,n){return(n?"-":"")+e.toLowerCase()}))+": "+e[t])})),n.join("; ")}(t);break;case"class":i=t}o.setAttribute(e,i)}})),t.forEach((function(e){"string"==typeof e?o.innerHTML+=e:1===e.nodeType&&o.appendChild(e)})),o},t.prototype.createHr=function(e){return this.createDom("li",k(e,{class:"menu-hr"}))},t.prototype.createLi=function(e){var n=this,t=this.createDom("span",{},[String(e.text)]),o={class:[e.disabled?"menu-disabled":"","ul"===e.type?"menu-ul":""].join(" ")},i=this.createDom("li",k(e,o),[t]);return!e.disabled&&"li"===e.type&&e.callback&&i.addEventListener("mousedown",(function(t){var o;null===(o=e.callback)||void 0===o||o.call(e,t),n.destroyMenu()})),i},t.prototype.createUl=function(e){var n=this.createLi(e);if(e.children&&e.children.length){var t=this.renderMenu(e.children);n.addEventListener("mouseenter",(function(e){n.appendChild(t),E(n,t)})),n.addEventListener("mouseleave",(function(e){if(e.toElement){for(var o=e.toElement;o;){if(o===t)return;o=o.parentNode}n.removeChild(t)}}))}return n},t}();return O}));
